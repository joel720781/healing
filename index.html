<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>ç™‚ç™’ç±¤èª</title>
    <style>
        body {
           margin: 0;
            height: 100vh;
             display: flex;
            flex-direction: column;
            justify-content: center;
           align-items: center;
           background-size: cover;
           background-position: center;
          background-repeat: no-repeat;
         font-family: "Arial", sans-serif;
          overflow: hidden;
            padding: 0;
             text-align: center;
        }

        .bg-selector {
          margin-bottom: 20px;
            display: flex;
              flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }

        .bg-thumb {
          width: 80px;
          height: auto;
          object-fit: cover;
          margin: 5px;
          border: 3px solid transparent;
          border-radius: 8px;
          cursor: pointer;
            transition: transform 0.3s;
        }

        .bg-thumb:hover {
          border-color: #ffaa88;
            transform: scale(1.05);
        }

        #fortune {
           font-size: 1.5em;
             background: rgba(255, 255, 255, 0.8);
              padding: 20px 30px;
              border-radius: 15px;
             margin-bottom: 20px;
             text-align: center;
        }

        button {
          margin-top: 10px;
          padding: 10px 16px;
          font-size: 1em;
          border: none;
          border-radius: 8px;
          background-color: rgba(255,255,255,0.8);
          cursor: pointer;
        }

        button:hover {
          background-color: #ffffffcc;
        }
        #contentWrapper {
            position: absolute;
             top: 40%;
             left: 50%;
            transform: translate(-50%, -50%);
             text-align: center;
             z-index:1;
        }
        #bgSelector {
          position: relative;
          z-index: 2;
         margin-top: 300px;
         text-align: center;
}
        @media (max-width: 600px) {
    .bg-thumb {
        width: 60px;
    }
            button {
        font-size: 0.9em;
        padding: 8px 12px;
    }
             #fortune {
    width: 100%;
     max-width: 100%;
    margin: 0 auto;
    font-size: 1.2em;
    padding: 16px 20px;
    line-height: 1.6;
    }
            #pupupButtonWrapper{
    font-size: 1.2em;
    padding: 16px 20px;
    margin: 15px;
    line-height: 1.6;
        }
        }
.popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(255, 255, 255, 0.95);
  padding: 30px;
  border-radius: 15px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
  z-index: 999;
  max-width: 80%;
  max-height: 60%;
  overflow-y: auto;
  text-align: left;
}
.popup h2 {
  margin-top: 0;
  font-size: 1.4em;
  text-align: center;
}
.popup ul {
  list-style: none;
  padding: 0;
}
.popup li {
  margin: 10px 0;
  border-bottom: 1px dashed #aaa;
  padding-bottom: 5px;
}
.popup button {
  margin-top: 20px;
  padding: 8px 16px;
  border-radius: 8px;
  border: none;
  background-color: #f0f0f0;
  cursor: pointer;
}
.overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    backdrop-filter: blur(5px);
    background: rgba(0, 0, 0, 0.2);
    z-index: 1;
}
#popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(255, 255, 255, 0.95);
  padding: 30px 40px;
  border-radius: 15px;
  z-index: 100;
  box-shadow: 0 0 25px rgba(0,0,0,0.25);
  max-width: 90%;
  max-height: 70%;
  overflow-y: auto;
  text-align: center;
}


.blur #fortune {
  opacity: 0;
}

<!--é›†å¡ç°¿-->
.card::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, 0.4); /* ç™½è‰²éœ§åŒ– */
  z-index: 0;
  border-radius: 12px;
}
.card > * {
  position: relative;
  z-index: 1;
}
.card-popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(255, 255, 255, 0.95);
  padding: 25px 30px;
  border-radius: 15px;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
  z-index: 1000;
  width: 90%;
  max-width: 500px;
  text-align: center;
}
.card-popup .quote {
  font-size: 1.2em;
  margin: 10px 0 20px;
}
.card-popup textarea {
  width: 100%;
  margin: 5px 0;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
  resize: none;
  font-size: 0.95em;
}
.card-popup button {
  margin-top: 15px;
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  background-color: #ffd6d6;
  cursor: pointer;
  font-size: 1em;
  margin-right: 10px;
}
.card-popup button:hover {
  background-color: #ffc0c0;
}
#cardGallery {
  display: flex; /* è¦ç¢ºä¿é€™è¡Œæœ‰ä½œç”¨ */
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
  padding: 30px;
   max-height: 70vh;
  overflow-y: auto;
  margin-bottom: 20px;
}

.card {
  width: 250px;
  height: 350px;
  background-image: url("images/card-bg.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  padding: 20px;
  text-align: left;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  transition: transform 0.3s;
  cursor: pointer;

}

.card:hover {
  transform: scale(1.03);
}
.card-content {
  background: rgba(255, 255, 255, 0.3);
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  padding: 12px;
  border-radius: 10px;
  font-size: 1em;
  margin-bottom: 10px;
}

.card-content .quote-text {
  font-weight: bold;
  color: #333;
  font-size: 1em;
}


.card-notes p {
  margin: 4px 0;
}
.popup-buttons {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 20px;
}
         #popupButtonWrapper {
  position: absolute;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  z-index: 1;
}

    </style>
</head>
<body onload="setRandomBackground()">

<div id="contentWrapper">
    <div id="fortune">æº–å‚™å¥½äº†å—?å…ˆæ·±å‘¼å¸ä¸‰æ¬¡ï¼Œå¿ƒä¸­æƒ³è‘—ä»Šå¤©å®‡å®™æœ‰ä»€éº¼è©±æƒ³è·Ÿæˆ‘èªªï¼Œä¸¦æŒ‰ä¸‹æ¥æ”¶ã€‚ ğŸŒŸ</div>
    <button id="drawBtn" onclick="drawFortune()">æ¥æ”¶ âœ¨</button>
    <button id="bgBtn" onclick="setRandomBackground()">åˆ‡æ›èƒŒæ™¯ ğŸŒˆ</button>
    <button onclick="showCardGallery()" id="openGalleryBtn"> ğŸ’« æˆ‘çš„å®‡å®™å›éŸ³</button>

    <div id="bgSelector" class="bg-selector" style="display: none;">
        <p>è«‹é¸æ“‡èƒŒæ™¯åœ–ï¼š</p>
        <img src="images/bg1.png" class="bg-thumb" onclick="changeBackground('images/bg1.png')">
        <img src="images/bg2.png" class="bg-thumb" onclick="changeBackground('images/bg2.png')">
        <img src="images/bg3.png" class="bg-thumb" onclick="changeBackground('images/bg3.png')">
        <img src="images/bg4.png" class="bg-thumb" onclick="changeBackground('images/bg4.png')">
        <img src="images/bg5.png" class="bg-thumb" onclick="changeBackground('images/bg5.png')">
        <img src="images/bg6.png" class="bg-thumb" onclick="changeBackground('images/bg6.png')">
        <img src="images/bg7.png" class="bg-thumb" onclick="changeBackground('images/bg7.png')">
        <img src="images/bg8.png" class="bg-thumb" onclick="changeBackground('images/bg8.png')">
        <img src="images/bg9.png" class="bg-thumb" onclick="changeBackground('images/bg9.png')">
        <img src="images/bg10.png" class="bg-thumb" onclick="changeBackground('images/bg10.png')">
        <img src="images/bg11.png" class="bg-thumb" onclick="changeBackground('images/bg11.png')">
    </div>
</div>

</div>
<div id="cardGallery" style="display:none;"></div>
<div class="card-popup" id="cardPopup" style="display: none;">
    <h2>âœ¨ ä½ æŠ½åˆ°çš„ç±¤èª âœ¨</h2>
    <p class="quote" id="cardQuote">ã€Œä½ æ²’æœ‰èµ°å¾—å¤ªæ…¢ï¼Œåªæ˜¯åœ¨å¥½å¥½æ„Ÿå—é¢¨æ™¯ã€‚ã€</p>


    <hr>
    <h3>ğŸ’¡ è®“æˆ‘å€‘å¯«ä¸‹ä»Šå¤©ç™¼ç”Ÿçš„ä»»ä½•ç¾å¥½äº‹ç‰©</h3>
    <div id="pupupButtonWrapper">
        <textarea id="note1" placeholder="1. ä»Šå¤©é‡è¦‹ä¸€å€‹è¦ªåˆ‡çš„äºº..."></textarea>
        <textarea id="note2" placeholder="2. åƒåˆ°å–œæ­¡çš„ç”œé»..."></textarea>
        <textarea id="note3" placeholder="3. å’Œæœ‹å‹èŠå¾—å¾ˆé–‹å¿ƒ..."></textarea>
    </div>
    <div id="closeCardPopup" class="popup-buttons" style="display:none; margin: 20px auto;">
        <button onclick="saveNotes()">ğŸ’¾ ä¿å­˜ç­†è¨˜</button>
        <button   onclick="closeCardPopup()">â é—œé–‰</button>
    </div>



</div>
<div id="cardGallery" style="display: none;"></div>
<button id="closeGalleryBtn" style="display:none; margin: 20px auto;" onclick="closeCardGallery()">â é—œé–‰</button>
<script>
    const backgrounds = [
   'images/bg1.png',
   'images/bg2.png',
   'images/bg3.png',
   'images/bg4.png',
   'images/bg5.png',
   'images/bg6.png',
   'images/bg7.png',
   'images/bg8.png',
   'images/bg9.png',
   'images/bg10.png',
   'images/bg11.png'

 ];
 function drawFortune() {
         const today = new Date().toLocaleDateString();
    const lastDrawDate = localStorage.getItem("lastDrawDate");

    if (lastDrawDate === today) {
        alert("ä»Šå¤©å·²ç¶“æŠ½éå›‰ï½æ˜å¤©å†ä¾† ğŸŒŸ");
        return;
    }
   const fortunes = [
     "ä½ æ²’æœ‰èµ°å¾—å¤ªæ…¢ï¼Œåªæ˜¯åœ¨å¥½å¥½æ„Ÿå—é¢¨æ™¯ã€‚",
     "ä»Šå¤©çš„ä½ ï¼Œå¾ˆåŠªåŠ›äº†ï¼Œè©²ä¼‘æ¯ä¸€ä¸‹äº†ã€‚",
     "å³ä½¿æ²’æœ‰äººèªªï¼Œä½ ä¹Ÿåšå¾—å¾ˆå¥½ã€‚",
     "ä½ ä¸éœ€è¦å®Œç¾ï¼Œåªè¦å­˜åœ¨å°±è¶³å¤ ç¾å¥½ã€‚",
     "ä¸–ç•Œæœ‰é»åµï¼Œä½†ä½ å¯ä»¥é¸æ“‡éœä¸‹ä¾†ã€‚",
     "å‚·å£æœƒç™’åˆï¼Œå°±åƒå¤ªé™½ç¸½æœƒå‡èµ·ã€‚",
     "å¿ƒè»Ÿä¸æ˜¯ç¼ºé»ï¼Œæ˜¯ä½ å¿ƒè£¡æœ‰æº«æŸ”çš„æ°´æºã€‚",
     "ç•¶ä½ å­¸æœƒæº«æŸ”å°å¾…è‡ªå·±ï¼Œå®‡å®™ä¹Ÿæœƒæº«æŸ”å°ä½ ã€‚",
     "åˆ¥æ€¥ï¼Œä¸€åˆ‡éƒ½æœƒåœ¨å‰›å‰›å¥½çš„æ™‚é–“åˆ°ä¾†ã€‚",
     "æ¥å—ä»»ä½•æ”¹è®Šï¼Œè®“è‡ªå·±è®Šå¾—æ›´å¥½ã€‚",
     "æŒçºŒåŠªåŠ›ï¼Œäº‹æƒ…æœƒæœ‰æ–¹å‘ï¼Œæœƒè¶Šä¾†è¶Šå¥½ã€‚",
     "ç¾åœ¨çš„ä½ æ˜¯è™•æ–¼æœ€ä½³ç‹€æ…‹ï¼Œå‹‡æ•¢å»å†’éšªå§!",
     "æ”¹è®Šé›–é›£ï¼Œå‹¿ç•æ‡¼ï¼Œé€™æ˜¯ç‚ºäº†æ›´å¥½çš„äººç”Ÿã€‚",
     "å›°å¢ƒé™åˆ¶ä½ ï¼Œçµ¦è‡ªå·±åŠ›é‡ï¼Œå‘å‰èµ°ä¾¿èƒ½çªç ´ã€‚",
     "ç¾åœ¨ä¸å®œè¡å‹•ï¼Œå…ˆæº–å‚™å¥½å†ç­‰æ™‚æ©Ÿã€‚",
     "äº«å—éå»åŠªåŠ›ï¼Œå¦¥å–„è¦åŠƒæœªä¾†æ–°é–‹å§‹ã€‚",
     "è§£æ±ºæœªäº†çš„äº‹ï¼Œåˆ¥æ´»åœ¨éå»ã€‚",
     "ç¾åœ¨æ˜¯æœ€ä½³æ”¹è®Šæ™‚æ©Ÿï¼Œç­‰å¾…å°‡ç„¡æ³•å¸¶ä¾†è®ŠåŒ–ã€‚",
     "é‡ä¸é©äº‹æƒ…ï¼Œé›¢é–‹å³å¯ï¼Œç„¡éœ€ç¡¬ç¢°ç¡¬ã€‚",
     "å°‡å€‹äººåˆ©ç›Šç½®æ–¼æœ€å¾Œï¼Œä»»ä½•ç›®æ¨™éƒ½éœ€ä»˜å‡ºä»£åƒ¹ã€‚",
     "ä»˜å‡ºèˆ‡å›å ±è¦å¹³è¡¡ï¼Œå‹¿ç›²ç›®ä»˜å‡ºæˆ–éåº¦æ¥å—ã€‚",
     "è‹¥èƒ½æŠŠæ¡æ©Ÿæœƒï¼Œä»»ä½•æŒ«æŠ˜éƒ½å°‡è½‰åŒ–ç‚ºä½ çš„æ­¦å™¨ã€‚",
     "ç†æ€§æ„Ÿæ€§æ‹‰æ‰¯ä¸­ï¼Œçµ±æ•´å¾Œéš¨ç›´è¦ºè€Œè¡Œã€‚",
     "æ–°çš„é–‹å§‹å°‡æ¿€ç™¼ä½ çš„æ½›èƒ½ï¼Œä½†åˆ¥å¿˜äº†å¥½å¥½ä¼‘æ¯ã€‚",
     "è€å¿ƒé»ï¼Œçµ¦å¥½é‹ä¸€é»æ™‚é–“ã€‚",
     "è¿‘æœŸå¯èƒ½è¿ä¾†é‡å¤§çªç ´ï¼Œæ¥å—æ”¹è®Šï¼Œä¸è¦æŠ—æ‹’ã€‚",
     "ç›¸ä¿¡ç›´è¦ºï¼Œé‡è¦–éç¨‹ï¼Œå®šèƒ½é”åˆ°ç›®æ¨™ã€‚",
     "å¤šèµ°èµ°å……å¯¦å¿ƒéˆï¼Œæ©Ÿæœƒæ­£é€æ¼¸é è¿‘ã€‚",
     "ä½ æ˜¯æ“æœ‰èƒ½åŠ›é¢å°ä»»ä½•äº‹æƒ…çš„ï¼Œä¸ç”¨å®³æ€•ç›¸ä¿¡è‡ªå·±ã€‚",
     "æƒ³åšç”šéº¼äº‹æƒ…å°±å»åšï¼Œä¸è¦å®³æ€•çŠ¯éŒ¯ã€‚",
     "ä½ å…§å¿ƒæ˜¯å¾ˆå¼·å¤§çš„ï¼Œæ²’æœ‰ç”šéº¼äº‹æœƒè®“ä½ åˆ°å®³æ€•ã€‚",
     "åˆ¶å®šç›®æ¨™è·Ÿè‘—æ„Ÿè¦ºèµ°ï¼Œä¸èƒ½è¡å‹•éš¨æ™‚ä¿æŒè­¦è¦ºã€‚",
     "åªè¦å¾€å‰èµ°çµ•å°æœ‰è§£æ±ºçš„æ–¹æ³•ï¼Œåœåœ¨åŸåœ°æ˜¯æ²’æœ‰å¹«åŠ©çš„ã€‚",
     "åªè¦åŠªåŠ›å»åšå®‡å®™è‡ªç„¶æœƒå¹«åŠ©ä½ ã€‚",
     "å¹«åŠ©ä»–äººä¹Ÿæ¥å—åˆ¥äººçš„å¹«åŠ©ï¼Œäººæ˜¯éœ€è¦äº’ç›¸ä¾é çš„ã€‚",
     "ä¿æŒé–‹æ”¾å¿ƒæ…‹ï¼Œç›¸ä¿¡è‡ªå·±ï¼Œå¾ˆå¤šäº‹æƒ…éƒ½æœƒä¸Šè»Œé“ã€‚",
     "éå»ä»˜å‡ºçš„åŠªåŠ›å°‡æœƒæœ‰çµæœã€‚",
     "ä¸–ç•Œä¸è®Šçš„é“ç†å°±æ˜¯ä¸€åˆ‡éƒ½åœ¨è®Šï¼Œæ¥å—æ”¹è®Šï¼Œäº«å—éç¨‹ã€‚"
   ];
const result = fortunes[Math.floor(Math.random() * fortunes.length)];
    document.getElementById("fortune").innerText = result;

    localStorage.setItem("lastDrawDate", today);
    saveFortune(result);
   }
 function setRandomBackground() {
    const randomIndex = Math.floor(Math.random() * backgrounds.length);
    document.body.style.backgroundImage = `url('${backgrounds[randomIndex]}')`;
    document.body.style.backgroundSize = 'cover';
    document.body.style.backgroundPosition = 'center';
    document.body.style.backgroundRepeat = 'no-repeat';
  }


   function changeBackground(imagePath) {
     document.body.style.backgroundImage = `url('${imagePath}')`;
   }
   function toggleBackgrounds() {
 const bgDiv = document.getElementById("bgSelector");
 bgDiv.style.display = (bgDiv.style.display === "none") ? "block" : "none";
}

    function saveFortune(fortune) {
  let history = JSON.parse(localStorage.getItem("fortuneHistory")) || [];
  const alreadyExists = history.some(item => item.text === fortune);

  if (!alreadyExists) {
    const today = new Date().toLocaleDateString();
    history.push({ text: fortune, date: today });
    localStorage.setItem("fortuneHistory", JSON.stringify(history));
  }
}


<!--é›†å¡ç°¿-->
function saveNotes() {
  const quote = document.getElementById("cardQuote").innerText;
  const note1 = document.getElementById("note1").value;
  const note2 = document.getElementById("note2").value;
  const note3 = document.getElementById("note3").value;
  localStorage.setItem("notes_" + quote, JSON.stringify([note1, note2, note3]));
  alert("å·²ä¿å­˜ä»Šæ—¥çš„ä¸‰ä»¶ç¾å¥½å°äº‹ ğŸ’–");
}
function showCardGallery() {
  // 2. é¡¯ç¤º cardGallery
  const history = JSON.parse(localStorage.getItem("fortuneHistory")) || [];
  const container = document.getElementById("cardGallery");
<!--  container.innerHTML = ""; // æ¸…ç©ºå…§å®¹-->

  if (history.length === 0) {
    container.innerHTML = '<p style="text-align:center; font-size:1.2em;">ä½ é‚„æ²’æœ‰ä»»ä½•å®‡å®™å›éŸ³å¡ç‰Œï¼Œå¿«å»æŠ½ä¸€å¼µå§ï¼</p>';
  } else {
    history.forEach((item, index) => {
      const card = document.createElement("div");
      card.className = "card";
      const notes = JSON.parse(localStorage.getItem("notes_" + item.text)) || ["", "", ""];
card.innerHTML = `
  <div class="card-content">
  <p class="card-date">ğŸ“… ï¼š${item.date}</p>
    <p class="quote-text">ã€Œ${item.text}ã€</p>
    </div>
  <div class="card-content">
    <p>ğŸ’¡ 1. ${notes[0] || "(å°šæœªç´€éŒ„)"}</p>
    <p>ğŸ’¡ 2. ${notes[1] || "(å°šæœªç´€éŒ„)"}</p>
    <p>ğŸ’¡ 3. ${notes[2] || "(å°šæœªç´€éŒ„)"}</p>
  </div>
`;
       card.onclick = () => openCardPopup(item.text);
      container.appendChild(card);
    });
  }
  container.style.display = "flex";
  // 3. é¡¯ç¤ºé—œé–‰æŒ‰éˆ•
  document.getElementById("closeGalleryBtn").style.display = "block";
  document.getElementById("contentWrapper").style.display = "none";
}
   function openCardPopup(text) {
  document.getElementById("cardQuote").innerText = text;
  const savedNotes = JSON.parse(localStorage.getItem("notes_" + text)) || ["", "", ""];
  document.getElementById("note1").value = savedNotes[0];
  document.getElementById("note2").value = savedNotes[1];
  document.getElementById("note3").value = savedNotes[2];
  document.getElementById("cardPopup").style.display = "block";
   document.getElementById("cardGallery").style.display = "none";
  document.getElementById("closeGalleryBtn").style.display = "none";
  document.getElementById("closeCardPopup").style.display = "flex";
}
<!--å¡ç‰‡-->
function closeCardPopup() {
  document.getElementById("cardPopup").style.display = "none";
  document.getElementById("contentWrapper").style.display = "none";
  document.getElementById("cardGallery").style.display = "flex";
  document.getElementById("closeGalleryBtn").style.display = "flex";
}
<!--é›†æŠŠç°¿-->
    function closeCardGallery() {
     document.getElementById("contentWrapper").style.display = "block";
  document.getElementById("fortune").style.display = "flex";
  document.getElementById("closeCardPopup").style.display = "none";
  document.getElementById("closeGalleryBtn").style.display = "none";
document.getElementById("cardGallery").style.display = "none";
}

</script>
</body>
</html>
